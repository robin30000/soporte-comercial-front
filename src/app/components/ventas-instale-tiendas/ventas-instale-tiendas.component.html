<app-header></app-header>
<mat-card>
  <mat-card-content>
    <mat-grid-list cols="1" rowHeight="100px">
      <mat-grid-tile [colspan]="1" [rowspan]="1">
        <h2>Solicitud disponibilidad de agendas</h2>
      </mat-grid-tile>
    </mat-grid-list>
    <br />

    <form [formGroup]="form" (ngSubmit)="registrar()">
      <mat-grid-list cols="{{ desired_columns }}" rowHeight="120px">
        <mat-grid-tile
          [colspan]="desired_columns == 4 ? desired_columns - 2 : desired_columns - 1"
          [rowspan]="1"
        >
          <mat-form-field appearance="fill" [ngClass]="desired_columns == 2 ? 'menor' : 'ancho'">
            <mat-label>Pedido</mat-label>
            <input
              matInput
              autocomplete="off"
              formControlName="pedido"
              required
            />
          </mat-form-field>
        </mat-grid-tile>

        <mat-grid-tile
          [colspan]="desired_columns == 4 ? desired_columns - 3 : desired_columns - 1"
          [rowspan]="1"
        >
          <button mat-fab color="primary" class="start" (click)="buscaPedidoVenta()">
            <mat-icon>search</mat-icon>
          </button>
        </mat-grid-tile>

        <mat-grid-tile [colspan]="2" [rowspan]="1" *ngIf="state">
          <mat-form-field class="ancho" appearance="fill">
            <mat-label>Documento Cliente</mat-label>
            <input
              matInput
              autocomplete="off"
              formControlName="documento_cliente"
              required
            />
          </mat-form-field>
        </mat-grid-tile>

        <mat-grid-tile [colspan]="2" [rowspan]="1" *ngIf="state">
          <mat-form-field appearance="fill" class="ancho">
            <mat-label>Fecha Atencion</mat-label>
            <input
              matInput
              [matDatepicker]="picker"
              formControlName="fecha_atencion"
            />
            <mat-datepicker-toggle
              matIconSuffix
              [for]="picker"
            ></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>
        </mat-grid-tile>

        <mat-grid-tile [colspan]="2" [rowspan]="1" *ngIf="state">
          <mat-form-field class="ancho" appearance="fill">
            <mat-label>Numero Contacto Cliente</mat-label>
            <input
              matInput
              matInput
              autocomplete="off"
              formControlName="contacto_cliente"
              required
            />
          </mat-form-field>
        </mat-grid-tile>

        <mat-grid-tile [colspan]="2" [rowspan]="1" *ngIf="state">
          <mat-form-field class="ancho" appearance="fill">
            <mat-label>Jornada Atencion</mat-label>
            <mat-select formControlName="jornada_atencion" required>
              <mat-option *ngFor="let item of jornada" [value]="item">
                {{ item }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </mat-grid-tile>

        <mat-grid-tile [colspan]="2" [rowspan]="1" *ngIf="state">
          <mat-form-field class="ancho" appearance="fill">
            <mat-label>Regional</mat-label>
            <mat-select formControlName="regional" required>
              <mat-option *ngFor="let item of region" [value]="item">
                {{ item }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </mat-grid-tile>

        <mat-grid-tile
          [colspan]="1"
          [rowspan]="1"
          *ngIf="desired_columns == 4"
        ></mat-grid-tile>

        <mat-grid-tile [colspan]="desired_columns" [rowspan]="1" *ngIf="state">
          <mat-form-field
            appearance="fill"
            [ngClass]="desired_columns == 4 ? 'full' : 'fullM'"
          >
            <mat-label>Observaciones</mat-label>
            <textarea
              matInput
              autocomplete="off"
              formControlName="observacion_canal"
              required
              rows="5"
            ></textarea>
          </mat-form-field>
        </mat-grid-tile>

        <mat-grid-tile [colspan]="desired_columns" [rowspan]="1" *ngIf="state">
          <button
            mat-raised-button
            class="buttonPage"
            type="submit"
            [disabled]="form.invalid || !state"
          >
            Solicitar Agenda
          </button>
        </mat-grid-tile>
      </mat-grid-list>
    </form>
  </mat-card-content>
</mat-card>

<mat-card-content *ngIf="!state">
  <mat-grid-list cols="1" rowHeight="100px">
    <mat-grid-tile [colspan]="1" [rowspan]="1">
      <h2>Para iniciar digite un pedido valido</h2>
    </mat-grid-tile>
  </mat-grid-list>
</mat-card-content>
